---
- name: create arrangeit user directory if it does not exist
  win_file:
    path: C:\Users\vagrant\arrangeit
    state: directory
  tags: tests

- name: copy user settings file
  win_copy:
    src: user_settings.json
    dest: C:\Users\vagrant\arrangeit\user_settings.json
  changed_when: false
  tags: tests

- name: running all unit tests
  win_command: "C:\\dev\\venvs\\arrangeit\\Scripts\\activate.bat && pytest"
  args:
    chdir: "C:\\dev\\arrangeit"
  changed_when: false
  tags: tests

# - name: running all functional tests
#   win_command: "C:\\dev\\arrangeit\\tests\\functional\\robotstart.bat test_start.robot"
#   args:
#     chdir: "C:\\dev\\arrangeit\\tests\\functional"
#   # changed_when: false
#   notify: shutdown machine
#   tags: tests
